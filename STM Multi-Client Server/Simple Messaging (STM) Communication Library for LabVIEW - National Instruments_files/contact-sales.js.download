$(function(){var mobileBreakpointSwitch=1000;var mode="desktop";$('#contactSalesBtn').popover({html:true,trigger:'manual',placement:'top',template:'<div class="popover contactPopover" role="tooltip"><div class="sales-arrow"></div><div class="popover-header"></div><div class="popover-content"></div></div>',content:function(){return $($('#contactSalesBtn').data('popover-content-'+mode)).html();}}).click(function(e){e.preventDefault();mode=(window.innerWidth>mobileBreakpointSwitch)?"desktop":"mobile";$(".popover.contactPopover").removeClass('ni-green');$(".popover.contactPopover .popover-header").show();$($(this).data('popover-content-'+mode)).popover('hide');$(this).popover('toggle');$(this).toggleClass('opened');$('.popover.contactPopover').css('left','auto').css('right','120px');initCountryList();initHiddenFieldsForSDFC();initContactSalesNumber();if($(this).hasClass("opened")){NIAnalytics.captureNavigation({'eventName':'contact sales','eventLabel':'contact sales button'});NIAnalytics.captureOutcome({'eventName':'contact sales','eventAction':'start'});}else{if(!$(".popover.contactPopover .popover-content .questions").hasClass("hidden")){NIAnalytics.captureNavigation({'eventName':'contact sales','eventLabel':'sales support option close'});}
if(mode=='desktop'){if(!$(".popover.contactPopover .popover-content #contactSalesform").hasClass("hidden")){NIAnalytics.captureNavigation({'eventName':'contact sales','eventLabel':'form close'});}}
if(mode=='mobile'){if(!$(".popover.contactPopover .popover-content .mobileForm1").hasClass("hidden")){NIAnalytics.captureNavigation({'eventName':'contact sales','eventLabel':'message form close'});}
if(!$(".popover.contactPopover .popover-content .mobileForm2").hasClass("hidden")){NIAnalytics.captureNavigation({'eventName':'contact sales','eventLabel':'info form close'});}}}});function initCountryList(){var locale=$.cookie('locale')||"en-us";$.ajax({type:"GET",url:"/nia-service/countries/"+locale+"/",dataType:"JSON",success:function(data){$.each(data,function(index,country){$('.popover.contactPopover form .countrList').append($('<option>',{text:country.display,value:country.valueCode}));});$(".popover.contactPopover #country option:selected").prop("selected",false);$(".popover.contactPopover #country option:nth-child(2)").prop("selected","selected");}});}
function initHiddenFieldsForSDFC(){var tier=NI.env.tier;if(tier==""){$(".popover.contactPopover form").attr('action','https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8');$(".popover.contactPopover form input[name=oid]").val("00Di0000000jTAB");$(".popover.contactPopover form input[name=retURL]").val("https://www.ni.com");}else if(tier=="-test"){$(".popover.contactPopover form input[name=oid]").val("00D3K0000008aj8");$(".popover.contactPopover form input[name=retURL]").val("https://www-test.ni.com");}else if(tier=="-test2"){$(".popover.contactPopover form input[name=oid]").val("00D3K0000008aj8");$(".popover.contactPopover form input[name=retURL]").val("https://www-test2.ni.com");}else if(tier=="-dev2"){$(".popover.contactPopover form input[name=oid]").val("00D3J0000008aho");$(".popover.contactPopover form input[name=retURL]").val("https://www-dev2.ni.com");}else if(tier=="-dev"){$(".popover.contactPopover form input[name=oid]").val("00D3J0000008aho");$(".popover.contactPopover form input[name=retURL]").val("https://www-dev.ni.com");}
var date=new Date().toLocaleString("en-Us");var cReqDate=date.substr(0,date.lastIndexOf(':'))+" "+date.split(" ")[2];$(".popover.contactPopover form input[name=00Ni000000FoVoB]").val(cReqDate);};function initContactSalesNumber(){if($(".ni-contact-sales-number").length){var tier=HOST_ENVIROMENT(location.hostname);if(window.location.hostname.indexOf("localhost")!=-1){tier="-dev";}
var locale=(!$.cookie("locale")?'en-US':$.cookie("locale"));var url="https://www"+tier+".ni.com/branch-manager-service/phone/"+locale+"/phone/";$.get(url,function(data){$(".ni-contact-sales-number").each(function(index){$(this).find("p").remove();var phoneNumbers=$(this);data.forEach(function(value,index){var p=document.createElement("p");$(p).text(value.phone);phoneNumbers.append(p);});});},"json");}}
function checkFormValid(){var a=$(".popover.contactPopover #first_name").val();var b=$(".popover.contactPopover #last_name").val();var c=$(".popover.contactPopover #email").val();var d=$(".popover.contactPopover #phone").val();var e=$(".popover.contactPopover #country").val();if(a==""||b==""||c==""||d==""||e==""){return false;}
return true;}
$(document).on("click",".popover.contactPopover .supportNavigator",function(e){NIAnalytics.captureNavigation({'eventName':'contact sales','eventLabel':'support question'});});$(document).on("click",".popover.contactPopover .slideNavigator.prevSlide",function(e){NIAnalytics.captureNavigation({'eventName':'contact sales','eventLabel':'back arrow'});});$(document).on("click",".popover.contactPopover .slideNavigator",function(e){var x=window.pageXOffset,y=window.pageYOffset;$(window).one('scroll',function(){window.scrollTo(x,y);});var nextslide=parseInt($(this).data('popver-nextslide'));if(nextslide==1){NIAnalytics.captureNavigation({'eventName':'contact sales','eventLabel':'contact sales team'});}
if(nextslide==2&&!$(this).hasClass('formSubmitter')){NIAnalytics.captureNavigation({'eventName':'contact sales','eventLabel':'next button'});}
if($(this).hasClass('formSubmitter')){if(checkFormValid()){var email=$(".popover.contactPopover #email").val();NIAnalytics.captureNavigation({'eventName':'contact sales','eventLabel':'send button'});NIAnalytics.captureOutcome({'eventName':'contact sales','eventAction':'complete','email':email});var description=$(".popover.contactPopover form input[name=description_prefix]").val()+"\n"+"Page visited:"+window.location.href+"\n\n'"+$(".popover.contactPopover #description").val()+"'";$('.popover.contactPopover #description').val(description);var form=$('.popover.contactPopover form');var url=form.attr('action');$.ajax({type:"POST",crossDomain:true,url:url,data:form.serialize(),success:function(data){}});showContactSalesSlide(nextslide);}}else{showContactSalesSlide(nextslide);}});$.fn.popover.Constructor.prototype.getNewCalculatedOffset=function(placement,pos,actualWidth,actualHeight){if(actualHeight+105>=$(window).height()){actualHeight-=(actualHeight+160-$(window).height());$(".popover.contactPopover .popover-content").css("overflow-y","auto").css("overflow-x","hidden").css("max-height",actualHeight+"px");actualHeight+=45;}
return placement=='bottom'?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=='top'?{top:pos.top-actualHeight,left:pos.left+pos.width-actualWidth+20}:placement=='left'?{top:pos.top+pos.height/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2,left:pos.left+pos.width};};function showContactSalesSlide(slide){slide=slide||0;$.each($(".popover.contactPopover .popover-content > form > div"),function(){if(!$(this).hasClass('hidden')){$(this).addClass('hidden');}});var selectedSlide=$(".popover.contactPopover .popover-content > form > div")[slide];selectedSlide.classList.remove('hidden');if(slide===$(".popover.contactPopover .popover-content > form > div").length-1){$(".popover.contactPopover .popover-header").hide();$(".popover.contactPopover").addClass('ni-green');}
var popover=$('#contactSalesBtn').data('bs.popover');calculated_offset=popover.getNewCalculatedOffset(popover.options.placement,popover.getPosition(),parseInt($(selectedSlide).data('offset-width')),popover.$tip[0].offsetHeight);popover.applyPlacement(calculated_offset,popover.options.placement);};});